<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار خريطة فلسطين</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; direction: rtl; }
        #map-container { position: relative; display: inline-block; }
        #map { width: 600px; height: auto; cursor: pointer; }
        #message { font-size: 20px; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>اختبار خريطة فلسطين</h1>
    <p id="question">أين تقع مدينة القدس؟</p>

    <div id="map-container">
        <img id="map" src="213.png" alt="خريطة فلسطين">
    </div>

    <p id="message"></p>

    <script>
        let currentCity = "القدس"; // المدينة الحالية التي يجب اختيارها
        const cities = ["الخليل", "بئر السبع", "رفح", "غزة", "يافا", "أريحا", "القدس", "نابلس", "جنين", "طبريا", "الناصرة", "صفد", "عكا", "حيفا"];
        let cityIndex = 0;

        document.getElementById("map").addEventListener("click", function(event) {
            const rect = event.target.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            fetch("/check_answer", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ city: currentCity, x: x, y: y })
            })
            .then(response => response.json())
            .then(data => {
                if (data.correct) {
                    document.getElementById("message").textContent = "✔️ إجابة صحيحة!";
                    nextCity();
                } else {
                    document.getElementById("message").textContent = "❌ إجابة خاطئة، حاول مرة أخرى!";
                }
            });
        });

        function nextCity() {
            cityIndex++;
            if (cityIndex < cities.length) {
                currentCity = cities[cityIndex];
                document.getElementById("question").textContent = `أين تقع مدينة ${currentCity}؟`;
            } else {
                document.getElementById("question").textContent = "🎉 لقد انتهيت من جميع الأسئلة!";
                document.getElementById("message").textContent = "";
            }
        }
    </script>
</body>
</html>
