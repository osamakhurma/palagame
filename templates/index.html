<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار خريطة فلسطين</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        #map { width: 600px; cursor: pointer; }
        #message { font-size: 20px; margin-top: 10px; }
    </style>
</head>
<body>

    <h1>اختبار خريطة فلسطين</h1>
    <p id="question">أين تقع مدينة القدس؟</p>
    <img id="map" src="{{ url_for('static', filename='213.png') }}" alt="خريطة فلسطين">
    <p id="message"></p>

    <script>
        const cities = ["الخليل", "بئر السبع", "رفح", "غزة", "يافا", "أريحا", "القدس", "نابلس", "جنين", "طبريا", "الناصرة", "صفد", "عكا", "حيفا"];
        let currentCityIndex = 6; // نبدأ بالسؤال عن القدس

        document.getElementById("map").addEventListener("click", function(event) {
            let rect = event.target.getBoundingClientRect();
            let x = event.clientX - rect.left;
            let y = event.clientY - rect.top;
            let city = cities[currentCityIndex];

            fetch("/check_answer", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ city: city, x: x, y: y })
            })
            .then(response => response.json())
            .then(data => {
                let message = document.getElementById("message");
                if (data.correct) {
                    message.innerHTML = "✅ إجابة صحيحة!";
                    message.style.color = "green";
                    nextQuestion();
                } else {
                    message.innerHTML = "❌ إجابة خاطئة، حاول مرة أخرى!";
                    message.style.color = "red";
                }
            });
        });

        function nextQuestion() {
            currentCityIndex = (currentCityIndex + 1) % cities.length;
            document.getElementById("question").innerText = `أين تقع مدينة ${cities[currentCityIndex]}؟`;
        }
    </script>

</body>
</html>
